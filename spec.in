Summary: Implementation of XML-RPC for Perl
Name: perl-${DISTNAME}
Version: ${VERSION}
Release: ${RELEASE}
Epoch: 1
Vendor: Randy J. Ray
Copyright: Artistic
Group: Applications/CPAN
Source: ${DISTNAME}-${VERSION}.tar.gz
Url: http://www.blackperl.com/${NAME}
BuildRequires: perl >= 0:5.00503
AutoReq: no
Requires: perl >= 0:5.00503
Provides: perl-${DISTNAME} = ${VERSION}
BuildRoot: %{_tmppath}/%{name}-root
BuildArch: noarch

%description
The RPC::XML package for Perl is an implementation of the XML-RPC standard
as defined at <http://www.xmlrpc.com/spec>. It is written in pure Perl without
use or need of C (or XS) linkage. It does (at present) require the XML::Parser
and LWP CPAN modules for operation.

%prep
%setup -q -n ${DISTNAME}-%{version} 

%build
CFLAGS="$RPM_OPT_FLAGS" perl Makefile.PL PREFIX=$RPM_BUILD_ROOT/usr

%clean 
rm -rf $RPM_BUILD_ROOT

%install
rm -rf $RPM_BUILD_ROOT
install_dir=${INSTALLSITELIB}
mkdir -p $RPM_BUILD_ROOT/$installdir
make PREFIX=$RPM_BUILD_ROOT/usr install

[ -x /usr/lib/rpm/brp-compress ] && /usr/lib/rpm/brp-compress

rm -f $RPM_BUILD_ROOT${INSTALLSITEARCH}/perlocal.pod
rm -f $RPM_BUILD_ROOT${INSTALLSITEARCH}/auto/RPC/XML/.packlist
find $RPM_BUILD_ROOT/usr -type f -print |
        sed "s@^$RPM_BUILD_ROOT@@g" > ${DISTNAME}-${VERSION}-filelist
if [ "$(cat ${DISTNAME}-${VERSION}-filelist)X" = "X" ] ; then
    echo "ERROR: EMPTY FILE LIST"
    exit -1
fi

%files -f ${DISTNAME}-${VERSION}-filelist
%defattr(-,root,root)

%changelog
* Fri Aug  10 2001 rjray <rjray@blackperl.com>
- Spec file template created

* Fri Jan 31 2003  rjray <rjray@blackperl.com>
- specfile now works again, also under rpm 4.1.
